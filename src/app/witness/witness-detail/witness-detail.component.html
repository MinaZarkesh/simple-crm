<!-- Header Card -->
<mat-card>
  <mat-card-content class="user-detail-header">
    <button
      mat-icon-button
      class="pin-right-upper-corner"
      [matMenuTriggerFor]="witnessMenu"
    >
      <mat-icon class="more-vert">more_vert</mat-icon>
    </button>
    <mat-menu #witnessMenu="matMenu">
      <button mat-menu-item (click)="openEditWitnessDialog()">edit</button>
      <button mat-menu-item (click)="openDeleteWitnessDialog()">delete</button>
    </mat-menu>
    <img src="assets/img/person.png" alt="" />
    <div class="user-info-header">
      <h2>{{ this.currentWitness.name }}</h2>
      <p>{{ this.currentWitness.phone }}</p>
      <p>{{ this.currentWitness.address }}</p>
      <p>{{ this.currentWitness.role }}</p>
    </div>
  </mat-card-content>
</mat-card>

<div class="statement-menu">
  <h2>Zeugenaussagen</h2>
  <button
    class="add-statement-btn"
    mat-fab
    matTooltipPosition="above"
    matTooltip="Add statement"
    color="primary"
    (click)="openAddStatementDialog()"
  >
    <mat-icon>add</mat-icon>
  </button>
</div>

<mat-accordion>
  <!-- hideToggle -->
  <mat-expansion-panel
    (opened)="panelOpenState = true"
    (closed)="panelOpenState = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ dummyStatements[0].date }} ,{{ dummyStatements[0].time }} ,
        {{ dummyStatements[0].place }}
      </mat-panel-title>
      <mat-panel-description>
        <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}} -->
        {{ dummyEvents[0].description }}
      </mat-panel-description>
    </mat-expansion-panel-header>
    <section class="example-section">
      <mat-progress-bar
        class="example-margin"
        [color]="color"
        [mode]="mode"
        [value]="value"
        [bufferValue]="bufferValue"
      >
      </mat-progress-bar>
    </section>
    <mat-card class="event-info">
      <div>
        <p>{{ dummyEvents[0].date }} {{ dummyEvents[0].time }}</p>
        <p>{{ dummyEvents[0].place }}</p>
        <p>{{ dummyWitnesses[0].name }},{{ dummyEvents[0].witnesses }}</p>
      </div>
    </mat-card>

    <mat-form-field class="full-width mt-32">
      <mat-label>Aussage selbst</mat-label>
      <textarea
        rows="5"
        [disabled]="checked"
        matInput
        placeholder="Aussage selbst"
      >
 {{ dummyStatements[0].comment }}</textarea
      >
    </mat-form-field>

    <section class="example-section">
      <mat-slide-toggle
        class="example-margin"
        [color]="color"
        [checked]="checked"
        (change)="checked = !checked"
      >
        Aussage von Zeugen bestätigen!
      </mat-slide-toggle>
    </section>

    <p>Querverweise</p>
    <button mat-button [matMenuTriggerFor]="aboveMenu">Above</button>
    <mat-menu #aboveMenu="matMenu" yPosition="above">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="belowMenu">Below</button>
    <mat-menu #belowMenu="matMenu" yPosition="below">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="beforeMenu">Before</button>
    <mat-menu #beforeMenu="matMenu" xPosition="before">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="afterMenu">After</button>
    <mat-menu #afterMenu="matMenu" xPosition="after">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>
  </mat-expansion-panel>
  @for (statement of filteredStatements; track statement; let i = $index ){
  <mat-expansion-panel
    (opened)="panelOpenState = true"
    (closed)="panelOpenState = false"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ statement.date }} {{ statement.time }} ,
        {{ statement.place }}
      </mat-panel-title>
      <mat-panel-description>
        <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}} -->
        {{ getEventById(statement.event).description }}
      </mat-panel-description>
    </mat-expansion-panel-header>
    <button 
    mat-icon-button
    class="pin-right-corner-t48"
    [matMenuTriggerFor]="statementMenu"
    (click)="panelOpenState = true"
  >
    <mat-icon >more_vert</mat-icon>
  </button>
  <mat-menu #statementMenu="matMenu">
    <button mat-menu-item (click)="openEditStatementDialog()">Aussage bearbeiten</button>
    <button mat-menu-item (click)="openDeleteStatementDialog()">Aussage löschen</button>
  </mat-menu>
    <mat-card class="event-info">
      <button 
      mat-icon-button
      class="pin-right-upper-corner"
      (click)="openEditEventDialog()"
      >
      <!-- [matMenuTriggerFor]="eventMenu" -->
      <mat-icon >edit</mat-icon>
    </button>
    <mat-menu #eventMenu="matMenu">
      <!-- <button mat-menu-item (click)="openEditDialog()">Ereignis bearbeiten</button> -->
      <!-- <button mat-menu-item (click)="openDeleteDialog()">Aussage löschen</button> -->
    </mat-menu>
      <div>
        <p>
          {{ getEventById(statement.event).date }}
          {{ getEventById(statement.event).time }}
        </p>
        <p>{{ getEventById(statement.event).place }}</p>
        <!-- name of witnesses -->
        <p>{{ getWitnessListbyStatementId(statement.docId) }}</p>
        <!-- getWitnessListbyEventId(eventId: string) -->
      </div>
    </mat-card>

    <mat-form-field class="full-width mt-32">
      <mat-label>Aussage selbst</mat-label>
      <textarea
        rows="5"
        [disabled]="checked"
        matInput
        [(ngModel)]="statement.comment"
        placeholder="Aussage selbst"
      >
   {{ statement.comment }}</textarea
      >
    </mat-form-field>

    <section class="example-section">
      <mat-slide-toggle
        class="example-margin"
        [color]="color"
        [checked]="checked"
        (change)="checked = !checked"
      >
        Aussage von Zeugen bestätigen!
      </mat-slide-toggle>
    </section>

    <p>Querverweise</p>
    <button mat-button [matMenuTriggerFor]="aboveMenu">Above</button>
    <mat-menu #aboveMenu="matMenu" yPosition="above">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="belowMenu">Below</button>
    <mat-menu #belowMenu="matMenu" yPosition="below">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="beforeMenu">Before</button>
    <mat-menu #beforeMenu="matMenu" xPosition="before">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="afterMenu">After</button>
    <mat-menu #afterMenu="matMenu" xPosition="after">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>
  </mat-expansion-panel>
  }@empty {
  <li>There are no items.</li>
  }
</mat-accordion>

<button (click)="checkComment()">Testen</button>
<!-- <section class="example-section">
  <label class="example-margin">Color:</label>
  <mat-radio-group [(ngModel)]="color">
    <mat-radio-button class="example-margin" value="primary">
      Primary
    </mat-radio-button>
    <mat-radio-button class="example-margin" value="accent">
      Accent
    </mat-radio-button>
    <mat-radio-button class="example-margin" value="warn">
      Warn
    </mat-radio-button>
  </mat-radio-group>
</section>
<section class="example-section">
  <mat-progress-bar
    class="example-margin"
    [color]="color"
    [mode]="mode"
    [value]="value"
    [bufferValue]="bufferValue"
  >
  </mat-progress-bar>
</section>
<mat-card class="mt-32">
  <mat-card-content>
    <p>Querverweise</p>
    <button mat-button [matMenuTriggerFor]="aboveMenu">Above</button>
    <mat-menu #aboveMenu="matMenu" yPosition="above">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="belowMenu">Below</button>
    <mat-menu #belowMenu="matMenu" yPosition="below">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="beforeMenu">Before</button>
    <mat-menu #beforeMenu="matMenu" xPosition="before">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="afterMenu">After</button>
    <mat-menu #afterMenu="matMenu" xPosition="after">
      <button mat-menu-item>Item 1</button>
      <button mat-menu-item>Item 2</button>
    </mat-menu>
  </mat-card-content>
</mat-card> -->
